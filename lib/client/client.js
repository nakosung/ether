// Generated by CoffeeScript 1.6.2
(function() {
  var app;

  app = angular.module('client', ['ui', 'ui.bootstrap', 'ether']);

  app.controller('MainCtrl', function($scope, collection, rpc) {
    $scope.collection = collection;
    $scope.data = collection('test').data;
    $scope.stats = collection('stats').data;
    $scope.clients = collection('clients').data;
    $scope.myself = function() {
      var _ref;

      return (_ref = collection('users:self').data) != null ? _ref[0] : void 0;
    };
    $scope.myroom = function() {
      var _ref;

      return (_ref = collection('myroom').data) != null ? _ref[0] : void 0;
    };
    $scope.rpc = rpc;
    return setInterval((function() {
      var _ref, _ref1, _ref2, _ref3;

      if (((_ref = $scope.myroom()) != null ? _ref.owner : void 0) == null) {
        return (_ref1 = rpc.auth) != null ? (_ref2 = _ref1.room) != null ? (_ref3 = _ref2["in"]) != null ? _ref3.claimOwner() : void 0 : void 0 : void 0;
      }
    }), 1000);
  });

}).call(this);
