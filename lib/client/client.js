// Generated by CoffeeScript 1.6.2
(function() {
  var app;

  app = angular.module('client', ['ui', 'ui.bootstrap', 'ether', 'ui.directives']);

  app.controller('MainCtrl', function($scope, collection, rpc, autologin, autocol) {
    autocol($scope, 'myroom test me sync:stat users_online stats mm rooms');
    $scope.rpc = rpc;
    setInterval((function() {
      var _ref, _ref1, _ref2;

      if (((_ref = collection.all.myroom) != null ? _ref.owner : void 0) == null) {
        return (_ref1 = rpc.room) != null ? (_ref2 = _ref1["in"]) != null ? _ref2.claimOwner() : void 0 : void 0;
      }
    }), 1000);
    $scope.autocompleteSuggesions = function(req, res) {
      return rpc.auth.list.users($scope.targetUser, function(err, result) {
        if (!err) {
          return res(result);
        }
      });
    };
    window.rpc = rpc;
    return window.col = collection.all;
  });

}).call(this);
